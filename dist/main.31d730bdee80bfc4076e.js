(()=>{"use strict";const e=document.getElementById("search-name"),t=document.getElementById("search-id"),n=(document.querySelector(".search-by-name"),document.querySelector(".search-by-id"),document.getElementById("pokemon-name")),o=document.getElementById("pokemon-height"),a=document.getElementById("pokemon-weight"),r=document.getElementById("pokemon-img"),c=document.querySelector(".form-group"),i=(document.getElementById("pokemon-type"),document.getElementById("type1")),d=document.getElementById("type2"),l=document.getElementById("random-pokemon"),m=document.getElementById("pokedex-card"),u=document.querySelector(".dropdown-menu"),p=document.getElementById("catch-pokemon"),g=document.getElementById("release-pokemon"),h={water:"blue",fire:"red",grass:"green",ice:"powderblue",poison:"darkslateblue",psychic:"gold",fairy:"pink",normal:"grey",electric:"yellow",ground:"darkkhaki",rock:"saddlebrown",dark:"black",flying:"lightcyan",bug:"mediumseagreen",fighting:"salmon",dragon:"RebeccaPurple",ghost:"SlateBlue",steel:"silver"};function y(e,t,n){e[t]=n}let f,E={headers:{username:"Arnon"}};const k="http://localhost:3000";function v(){c.lastElementChild.classList.add("loader")}function x(){c.lastElementChild.classList.remove("loader")}function T(e,t){e.src=t}async function L(e){v();try{let t;function c(e){console.log(t.data.back_pic),T(e.target,t.data.back_pic)}function l(e){console.log(t.data.front_pic),T(e.target,t.data.front_pic)}Number(e)?t=await axios.get(`${k}/pokemon/get/${e}`,E):(t=await fetch(`${k}/pokemon/query`,{method:"GET",headers:{"Content-Type":"application/json",username:"Arnon"},body:JSON.stringify(e)}),console.log(t)),f=t.data.id,console.log(t),function(e){y(n,"innerText",`name: ${e.name}`),y(o,"innerText",`height: ${e.height}`),y(a,"innerText",`weight: ${e.weight}`),y(i,"innerText","type: "),y(r,"src",`${e.front_pic}`),y(i,"innerText",e.types[0].type.name),p.hidden=!1,g.hidden=!1;try{y(d,"innerText",e.types[1].type.name),d.style.color=h[d.innerText]}catch(e){y(d,"innerText",""),d.style.color=""}i.style.color="",i.style.color=h[i.innerText],m.hidden=!1}(t.data),r.addEventListener("mouseenter",c),r.addEventListener("mouseleave",l),p.addEventListener("click",I),x()}catch(e){console.log(e),x()}}function I(e){v();try{axios.put(`${k}/pokemon/catch/${f}`,{},E),alert("pokemon caught"),x()}catch(e){console.log("pokemon could not be cathced"),x()}}async function b(e){let t=function(e){return e.tagName===arguments[1]?e.previousElementSibling.value:e.tagName===arguments[2]?e.value:void 0}(e.target,"BUTTON","SELECT");t?L(t):alert("please enter a text")}async function C(e){if("P"!==e.target.tagName)return;const t=e.target.innerText;c.lastElementChild.classList.add("loader");try{!function(e,t){const n=document.createElement("select");e.pokemon.forEach((e=>{const t=document.createElement("option");t.innerText=e.pokemon.name,n.appendChild(t)})),t.appendChild(n),n.addEventListener("change",b)}((await axios.get(`https://pokeapi.co/api/v2/type/${t}`)).data,e.target),c.lastElementChild.classList.remove("loader")}catch(e){throw c.lastElementChild.classList.remove("loader"),e}}function B(e,t=[],n=[],o={}){let a=document.createElement(e);for(let e of t)"string"==typeof e&&(e=document.createTextNode(e)),a.append(e);for(let e of n)a.classList.add(e);for(let e in o)a.setAttribute(e,o[e]);return a}async function w(e){let t;t="IMG"===e.target.tagName?e.target.parentElement:e.target;const n=t.getAttribute(["data-name"]);try{const e=await axios.get(`https://pokeapi.co/api/v2/pokemon/${n}`);updatePOkemonToDom(e.data)}catch(e){throw e+"nooooooooo"}}s,e.addEventListener("click",b),t.addEventListener("click",b),i.addEventListener("click",C),d.addEventListener("click",C),document.body.addEventListener("click",(function(e){"SELECT"!==e.target.tagName&&(i.firstElementChild&&i.firstElementChild.remove(),d.firstElementChild&&d.firstElementChild.remove())})),l.addEventListener("click",(function(e){if("BUTTON"!==e.target.tagName)return;const t=function(){const e=Math.floor(10*Math.random()+.5)*Math.floor(10*Math.random()+.5)*Math.floor(10*Math.random()+.5);return e>898?e-102:e<1?e+34:e}();console.log(t),L(t)})),u.addEventListener("click",(async function(e){if("LI"!==e.target.tagName)return;const t=e.target.innerText,n=(await axios.get(`https://pokeapi.co/api/v2/type/${t}`)).data.pokemon;document.querySelector(".pokeImg-container").firstElementChild&&Array.from(document.querySelector(".pokeImg-container").children).forEach((e=>{e.remove()})),n.forEach((e=>{axios.get(`https://pokeapi.co/api/v2/pokemon/${e.pokemon.name}`).then((e=>{!function(e,t){const n=B("img",[],[],{src:`${e}`}),o=B("div",[n],["pokeImg-card","col-sm"],{"data-name":t});o.addEventListener("click",w),document.querySelector(".pokeImg-container").appendChild(o)}(e.data.sprites.front_default,e.data.name)}))}))})),Array.from(u.children).forEach((e=>{e.style.color=h[e.textContent]}))})();